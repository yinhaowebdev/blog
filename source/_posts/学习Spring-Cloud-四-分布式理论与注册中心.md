title: '学习Spring Cloud(四): 分布式理论与注册中心'
author: Billy Yin
tags: []
categories: []
date: 2020-12-20 23:40:00
---
### ACID理论
* Atomicity： 原子性
> ​ 整个事务中的所有操作，要么全部完成，要么全部不完成，不可能停滞在中间某个环节。
* Consistency 一致性
> 在事务开始之前和事务结束以后，数据库数据的一致性约束没有被破坏。
* Isolation 隔离性
> 如果一个事务要访问的数据正在被另外一个事务修改，只要另外一个事务未提交，它所访问的数据就不受未提交事务的影响。
* Durability持久性
> ​ 事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。
### CAP 理论
* Consistency： 一致性
>一旦数据更新完成并成功返回客户端后，那么分布式系统中所有节点在同一时间的数据完全一致。
* Availability： 可用性
> 服务一直可用，而且是正常响应时间。
* Partition toleranc：分区容错性
> 分布式系统中，尽管部分节点出现任何消息丢失或者故障，系统应继续运行。

CAP 已被证明不能同时满足。在实行分布式部署的大前提下（保证P），有了BASE理论。
### BASE 理论
* Basically Available：基本可用
> 对响应时间妥协，对服务功能妥协（降级）
* Soft state： 软状态
> 允许系统不同节点之间存在状态延迟
* Eventually consistent： 最终一致性
> 期限过后，应当保证所有副本保持数据一致性。
### 服务治理
微服务调用中，服务间的依赖往往会增加系统的耦合度，提高开发和运维的成本，为了解决这一问题，通常会引入服务治理的概念。
### 注册中心
用来记录分布式系统中全部服务的信息，包括网络信息和配置信息等，方便消费者找到和调用这些服务
* 生产方在注册中心注册自己的地址
* 消费方向注册中心请求所需服务的地址
* 注册中心返回所需服务的地址（列表）
* 消费方凭借地址（列表）向服务方发送请求

由于有分布式的前提，所以当下的注册中心多在满足AP或CP两者中进行选择和权衡
现有的方案主要有：
* zookeeper
* eureka
* consul
* nacos
* ectd

参考： [微服务设计学习（三）服务治理之服务注册与发现](https://juejin.cn/post/6844904006033080334)
